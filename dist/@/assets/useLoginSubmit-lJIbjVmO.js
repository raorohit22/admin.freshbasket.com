import{r as p,A as L,o as N,u as b,q as t,f as g,s as O}from"./index-JntRuJ30.js";import{u as w}from"./index.esm-NZsJ6F5_.js";import{A as o}from"./AdminServices-4nH-LU8a.js";const G=()=>{const[d,a]=p.useState(!1),{dispatch:i}=p.useContext(L),n=N(),e=b(),{register:S,handleSubmit:y,formState:{errors:l}}=w();return{onSubmit:async({name:h,email:r,verifyEmail:x,password:c,role:A})=>{var u,f;a(!0);const m=.5;try{if(e.pathname==="/login"){const s=await o.loginAdmin({email:r,password:c});s&&(t("Login Success!"),i({type:"USER_LOGIN",payload:s}),g.set("adminInfo",JSON.stringify(s),{expires:m,sameSite:"None",secure:!0}),n.replace("/dashboard"))}if(e.pathname==="/signup"){const s=await o.registerAdmin({name:h,email:r,password:c,role:A});s&&(t("Register Success!"),i({type:"USER_LOGIN",payload:s}),g.set("adminInfo",JSON.stringify(s),{expires:m,sameSite:"None",secure:!0}),n.replace("/"))}if(e.pathname==="/forgot-password"){const s=await o.forgetPassword({verifyEmail:x});t(s.message)}}catch(s){O(((f=(u=s==null?void 0:s.response)==null?void 0:u.data)==null?void 0:f.message)||(s==null?void 0:s.message))}finally{a(!1)}},register:S,handleSubmit:y,errors:l,loading:d}};export{G as u};
