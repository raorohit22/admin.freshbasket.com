import{j as e,r as x,i as E,e as d,k as R,s as m,q as j}from"./index-JntRuJ30.js";import{u as U,t as P,f as p,S as $,A as O}from"./Layout-CJRk6bmQ.js";import{P as q}from"./PageTitle-BImWcMAv.js";import"./iconBase-BQispcXl.js";const f=({id:h,name:c,type:n,handleClick:l,isChecked:r})=>e.jsx("input",{id:h,name:c,type:n,onChange:l,checked:r}),H=()=>{const[h,c]=x.useState(2),[n,l]=x.useState([]),[r,N]=x.useState(!1),{showDateTimeFormat:b}=U(),{notifications:o,totalUnread:y,totalDoc:g,loading:u,loadNotifications:k,updateNotificationStatus:w,deleteNotification:C,updateManyNotifications:S,deleteManyNotifications:T}=E(),A=async s=>{var i,t;try{await w(s,"read")}catch(a){m(((t=(i=a==null?void 0:a.response)==null?void 0:i.data)==null?void 0:t.message)||(a==null?void 0:a.message))}},B=async s=>{var i,t;try{await C(s)}catch(a){m(((t=(i=a==null?void 0:a.response)==null?void 0:i.data)==null?void 0:t.message)||(a==null?void 0:a.message))}},D=async s=>{var i,t;try{await k(s),c(a=>a+1)}catch(a){m(((t=(i=a==null?void 0:a.response)==null?void 0:i.data)==null?void 0:t.message)||(a==null?void 0:a.message))}},I=async()=>{var s,i;try{await S(n,"read"),l([]),j("Notifications marked as read successfully!"),c(1)}catch(t){m(((i=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:i.message)||(t==null?void 0:t.message))}},M=async()=>{var s,i;try{await T(n),j("Notifications deleted successfully!"),l([]),c(1)}catch(t){m(((i=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:i.message)||(t==null?void 0:t.message))}},_=()=>{N(!r),l(o==null?void 0:o.map(s=>s._id)),r&&l([])},F=s=>{const{id:i,checked:t}=s.target;l([...n,i]),t||l(n.filter(a=>a!==i))};return e.jsxs(e.Fragment,{children:[e.jsx(q,{children:"Notifications"}),e.jsx(d.Card,{className:"shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsxs(d.CardBody,{className:"flex justify-between",children:[e.jsx("div",{className:"",children:e.jsxs(d.Button,{disabled:(n==null?void 0:n.length)<1,onClick:I,className:"w-full rounded-md h-10 flex items-center justify-center bg-blue-500 text-white px-1 hover:bg-blue-700",children:[e.jsx("span",{className:"mr-2",children:e.jsx(P,{})}),"Mark is read"]})}),e.jsx("div",{className:"",children:e.jsxs(d.Button,{disabled:(n==null?void 0:n.length)<1,onClick:M,className:"w-full rounded-md h-10 bg-red-500 btn-red",children:[e.jsx("span",{className:"mr-3",children:e.jsx(p,{})}),"Delete"]})})]})}),e.jsx(d.Card,{className:"shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsxs(d.CardBody,{style:{padding:0},children:[e.jsxs("div",{className:"p-4 dark:text-gray-300",children:[e.jsxs("p",{className:"text-sm font-semibold text-teal-700",children:["Unread Notification (",y,")"]}),u&&e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-teal-700"})})]}),e.jsxs("div",{className:"border rounded-md",children:[e.jsxs("div",{className:"bg-gray-200 border-gray-400 p-2 dark:bg-gray-700 dark:text-gray-400 flex justify-between",children:[e.jsxs("div",{className:"flex",children:[e.jsx(f,{type:"checkbox",name:"selectAll",id:"selectAll",handleClick:_,isChecked:r}),e.jsx("p",{className:"text-xs font-semibold text-gray-500 my-auto dark:text-gray-300 ml-6 uppercase",children:"Notification"})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-xs font-semibold text-gray-500 my-auto dark:text-gray-300 mr-2 uppercase",children:"Action"})})]}),e.jsx("div",{className:"w-full lg:h-lg md:h-sm h-md relative",children:e.jsx($,{className:"scrollbar-hide",children:e.jsxs(d.TableContainer,{className:"border-none p-2",children:[e.jsx(d.Table,{children:e.jsx(d.TableBody,{className:"w-full h-440",children:o.map((s,i)=>e.jsxs(d.TableRow,{className:"border-none",children:[e.jsx(d.TableCell,{style:{padding:0},children:e.jsx(f,{type:"checkbox",name:s==null?void 0:s._id,id:s._id,handleClick:F,isChecked:n==null?void 0:n.includes(s._id)})}),e.jsx(d.TableCell,{className:"md:w-full w-1/5",style:{paddingRight:0},children:e.jsxs(R,{to:s.productId?`/product/${s.productId}`:`/order/${s.orderId}`,className:"flex items-center",onClick:()=>A(s._id),children:[e.jsx(d.Avatar,{className:"mr-2 md:block hidden bg-gray-50 border border-gray-200",src:s.image,alt:"image"}),e.jsxs("div",{className:"notification-content",children:[e.jsx("div",{className:"md:inline-block hidden",children:e.jsx("h6",{className:"font-medium text-gray-500",children:s==null?void 0:s.message})}),e.jsx("div",{className:"md:hidden",children:e.jsx("h6",{className:"font-medium text-gray-500",children:(s==null?void 0:s.message.substring(0,33))+"..."})}),e.jsxs("p",{className:"flex items-center text-xs text-gray-400",children:[s.productId?e.jsx(d.Badge,{type:"danger",children:"Stock Out"}):e.jsx(d.Badge,{type:"success",children:"New Order"}),e.jsx("span",{className:"ml-2",children:b(s==null?void 0:s.createdAt)})]})]}),s.status==="unread"&&e.jsx("span",{className:"px-2 md:flex hidden focus:outline-none text-emerald-600",children:e.jsx("img",{src:O,width:12,height:12,alt:"ellipse",className:"w-3 h-3 text-emerald-600"})})]})}),e.jsx(d.TableCell,{className:"text-right",style:{padding:`${window.innerWidth<420?"0":"0.5rem"}`},children:e.jsxs("div",{className:"group inline-block relative",children:[e.jsx("button",{onClick:()=>B(s._id),type:"button",className:"px-2 group-hover:text-blue-500 text-red-500 focus:outline-none",children:e.jsx(p,{})}),e.jsx("div",{className:"absolute hidden group-hover:inline-block bg-gray-50 dark:text-white mr-8 mb-1 right-0 z-50 px-3 py-2 text-sm font-medium text-red-600 rounded-lg shadow-sm tooltip dark:bg-gray-700",children:"Delete"})]})})]},i+1))})}),e.jsx("div",{children:g>5&&o.length!==g?e.jsx("div",{className:"text-center py-2",children:e.jsx("button",{onClick:()=>D(h+1),type:"button",className:"focus:outline-none text-blue-700 hover:underline transition ease-out duration-200 dark:text-gray-400",children:"See more notifications"})}):null})]})})})]})]})})]})};export{H as default};
